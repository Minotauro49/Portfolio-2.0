$(document).ready(function(){

	$.scrollToNav();
    
    // $.submitBtn();
   //(window).resize(function(){$.submitBtn();})
    
    $(window).scroll(function() {$.scrollProjects();})
    $(".projects-section").scroll(function() {$.scrollProjects();})

    
});


$.scrollProjects = function(){
    if ($("body").width() < 900){
        $(".projects-section").scrollTop(($(window).scrollTop()-2200)*3.5);
    }else{
        $(".projects-section").scrollTop(($(window).scrollTop()-2000)*3.2);
    }
}


$.scrollToNav = function(){
    
	$("#contactNav, #projectsNav, #featuresNav, #aboutNav, #Logo, #arrow1,#arrow2,#arrow3").click(function(e){
		switch(true){
			case e.target.id == "contactNav" || e.target.id == "arrow3":
				$("html, body").animate({ scrollTop: $("#contactDiv").offset().top-70 }, 500);
			break;
			case e.target.id == "projectsNav" || e.target.id == "arrow2":
				$("html, body").animate({ scrollTop: $("#projectsDiv").offset().top-70 }, 500);
			break;
			case e.target.id == "featuresNav" || e.target.id == "arrow1":
				$("html, body").animate({ scrollTop: $("#featuresDiv").offset().top-70 }, 500);
			break;
			case e.target.id == "aboutNav" || e.target.parentNode.id == "Logo":
				$("html, body").animate({ scrollTop: 0 }, 500);
			break;
		}
	})
}





$(document).ready(function(){

	// Initialize Firebase
	var config = {
	  apiKey: "AIzaSyBCxCdrBr_6yRemvEY5kB1qlLmg7ztc8eI",
	  authDomain: "portfolio2-a1f2a.firebaseapp.com",
	  databaseURL: "https://portfolio2-a1f2a.firebaseio.com",
	  projectId: "portfolio2-a1f2a",
	  storageBucket: "portfolio2-a1f2a.appspot.com",
	  messagingSenderId: "589722723067"
	};
	firebase.initializeApp(config);


	var send = false;

	$("#Submit").click(function(e){
		e.preventDefault();
		let validate = true;

		if (send === false) {
			if ($("#usr").val().replace(/\s+/, "") == "") {
				$("#lname").css("color","#d63e91");
				validate = false;

			}else{
				$("#lname").css("color","");
			}

			if ($("#eml").val().replace(/\s+/, "")  == "" || $("#eml").val().indexOf("@")== -1) {
				$("#lemail").css("color","#d63e91");
				validate = false;
			}else{
				$("#lemail").css("color","");
			}

			if ($("#msg").val().replace(/\s+/, "")  == "" || $("#msg").val().length < 6) {
				$("#lmessage").css("color","#d63e91");
				validate = false;
			}else{
				$("#lmessage").css("color","");
			}

        
			// Gether user infor and turns it to json format
			if (validate == true) {
				send = true;
				function userData(userName,email,message) {	
					let json = {"From":email,"Date":new Date().toString(),"Subject":userName,"Message":message}
					return json
				}
				var jsonUser = userData($("#usr").val(),$("#eml").val(),$("#msg").val())
		


				$("#ToggleSubmit").animate({height:"0px"},200);  
				$("#ToggleSubmit").promise().done(function(){$("#ToggleSubmit").css("display","none");})
				$(this).css({left:($("#ico").position().left-100)+"px"});
				$("#TextSub").html("MESSAGE SENDING...");
				$("#SubmitLoader").css("display","block");

				// Sender MESSAGE TO ME
				firebase.database().ref(Math.random().toString(36).substring(2)).set(jsonUser, function(error){
					if (error) {
						$("#TextSub").html("MESSAGE FAILED TO SEND");
						$("#SubmitLoader").css("display","none");
						$("#Submit").attr('class','btn btn-danger');
                        $("#Submit").css('left',"calc(50% - 200px)");
	
					}else{
						$("#TextSub").html("MESSAGE SUCCESSFULLY SEND");
						$("#SubmitLoader").css("display","none");
						$("#Submit").attr('class','btn btn-success');
                        
                        if($( window ).width() > 900){
                           $("#Submit").css('left','calc(50% - 160px)');
                        }else{
                            $("#Submit").css('left','calc(50% - 235px');
                        }
					}
				});
			}
		}
	})
})
